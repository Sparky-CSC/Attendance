<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Management System</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React Icons as inline SVG components
        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
        );

        const Users = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
        );

        const Clock = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
            </svg>
        );

        const Calendar = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );

        const BarChart3 = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="20" x2="12" y2="10"/>
                <line x1="18" y1="20" x2="18" y2="4"/>
                <line x1="6" y1="20" x2="6" y2="16"/>
            </svg>
        );

        const Settings = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3"/>
            </svg>
        );

        const UserCheck = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="8.5" cy="7" r="4"/>
                <polyline points="17 11 19 13 23 9"/>
            </svg>
        );

        const Plus = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );

        const Trash2 = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
        );

        const X = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        const Upload = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
        );

        const FileDown = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <path d="M12 18v-6"/>
                <path d="m9 15 3 3 3-3"/>
            </svg>
        );

        const QrCode = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="3" width="7" height="7"/>
                <rect x="14" y="3" width="7" height="7"/>
                <rect x="3" y="14" width="7" height="7"/>
                <path d="M17 14h1v1h-1v-1zm3 0h1v1h-1v-1zm-3 3h1v1h-1v-1zm3 0h1v1h-1v-1zm-3 3h1v1h-1v-1zm3 0h1v1h-1v-1z"/>
            </svg>
        );

        const Smartphone = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="5" y="2" width="14" height="20" rx="2" ry="2"/>
                <line x1="12" y1="18" x2="12.01" y2="18"/>
            </svg>
        );

        const AlertCircle = ({ size = 24, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
        );

        function ProAttendanceSystem() {
          const [activeTab, setActiveTab] = useState('dashboard');
          const [currentTime, setCurrentTime] = useState(new Date());
          const [attendanceMode, setAttendanceMode] = useState('manual');
          const [showQRCode, setShowQRCode] = useState(false);
          const [qrCodeData, setQrCodeData] = useState('');
          const [nfcListening, setNfcListening] = useState(false);
          const [checkInLog, setCheckInLog] = useState([]);
          const [searchQuery, setSearchQuery] = useState('');
          const [showAddClass, setShowAddClass] = useState(false);
          const [showAddStudent, setShowAddStudent] = useState(false);
          const [showAddSession, setShowAddSession] = useState(false);
          const [selectedClass, setSelectedClass] = useState(null);
          const [selectedSession, setSelectedSession] = useState(null);
          
          const [classes, setClasses] = useState([
            { id: 1, name: 'Computer Science 101', code: 'CS101', instructor: 'Dr. Smith', schedule: 'MWF 9:00-10:00' },
            { id: 2, name: 'Mathematics 201', code: 'MATH201', instructor: 'Prof. Johnson', schedule: 'TTh 11:00-12:30' }
          ]);

          const [sessions, setSessions] = useState([
            { id: 1, classId: 1, date: '2024-11-22', startTime: '09:00', endTime: '10:00', status: 'scheduled', location: 'Room 101' },
            { id: 2, classId: 1, date: '2024-11-24', startTime: '09:00', endTime: '10:00', status: 'scheduled', location: 'Room 101' }
          ]);

          const [students, setStudents] = useState([
            { id: 1, classId: 1, name: 'John Doe', studentId: 'STU001', email: 'john@example.com', photo: 'ðŸ‘¨â€ðŸŽ“' },
            { id: 2, classId: 1, name: 'Jane Smith', studentId: 'STU002', email: 'jane@example.com', photo: 'ðŸ‘©â€ðŸŽ“' },
            { id: 3, classId: 1, name: 'Bob Johnson', studentId: 'STU003', email: 'bob@example.com', photo: 'ðŸ‘¨â€ðŸ’¼' }
          ]);

          const [attendance, setAttendance] = useState([]);
          const [newClass, setNewClass] = useState({ name: '', code: '', instructor: '', schedule: '' });
          const [newStudent, setNewStudent] = useState({ name: '', studentId: '', email: '' });
          const [newSession, setNewSession] = useState({ date: '', startTime: '', endTime: '', location: '' });

          useEffect(() => {
            const timer = setInterval(() => setCurrentTime(new Date()), 1000);
            return () => clearInterval(timer);
          }, []);

          useEffect(() => {
            if (classes.length > 0 && !selectedClass) {
              setSelectedClass(classes[0]);
            }
          }, [classes]);

          const addLog = (event, type) => {
            setCheckInLog(prev => [...prev, { timestamp: new Date().toLocaleString(), event, type }]);
          };

          const handleAddClass = () => {
            if (!newClass.name || !newClass.code) return alert('Please enter class name and code');
            const newClassObj = { ...newClass, id: classes.length + 1 };
            setClasses([...classes, newClassObj]);
            setNewClass({ name: '', code: '', instructor: '', schedule: '' });
            setShowAddClass(false);
            addLog(`Added class: ${newClass.name}`, 'class');
          };

          const handleAddStudent = () => {
            if (!newStudent.name || !newStudent.studentId) return alert('Please enter student name and ID');
            if (!selectedClass) return alert('Please select a class first');
            const studentObj = { ...newStudent, id: students.length + 1, classId: selectedClass.id, photo: 'ðŸ‘¤' };
            setStudents([...students, studentObj]);
            setNewStudent({ name: '', studentId: '', email: '' });
            setShowAddStudent(false);
            addLog(`Added student: ${newStudent.name}`, 'student');
          };

          const handleUploadClassList = (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (event) => {
              const text = event.target.result;
              const lines = text.split('\n');
              const newStudents = [];
              
              for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const [name, studentId, email] = line.split(',').map(s => s.trim());
                if (name && studentId) {
                  newStudents.push({
                    id: students.length + newStudents.length + 1,
                    classId: selectedClass.id,
                    name,
                    studentId,
                    email: email || '',
                    photo: 'ðŸ‘¤'
                  });
                }
              }
              
              setStudents([...students, ...newStudents]);
              addLog(`Uploaded ${newStudents.length} students`, 'upload');
              alert(`Successfully uploaded ${newStudents.length} students`);
            };
            reader.readAsText(file);
            e.target.value = '';
          };

          const handleAddSession = () => {
            if (!newSession.date || !newSession.startTime || !newSession.endTime) return alert('Please fill all session fields');
            if (!selectedClass) return alert('Please select a class first');
            const sessionObj = {
              ...newSession,
              id: sessions.length + 1,
              classId: selectedClass.id,
              status: 'scheduled'
            };
            setSessions([...sessions, sessionObj]);
            setNewSession({ date: '', startTime: '', endTime: '', location: '' });
            setShowAddSession(false);
            addLog(`Added session for ${newSession.date}`, 'session');
          };

          const handleStartSession = (session) => {
            setSelectedSession(session);
            setSessions(sessions.map(s => s.id === session.id ? { ...s, status: 'active' } : s));
            addLog(`Started session for ${session.date}`, 'session');
          };

          const handleStatusChange = (studentId, newStatus, sessionId) => {
            const existingAttendance = attendance.find(a => a.sessionId === sessionId && a.studentId === studentId);
            const student = students.find(s => s.id === studentId);
            
            if (existingAttendance) {
              setAttendance(attendance.map(a => 
                a.sessionId === sessionId && a.studentId === studentId
                  ? { ...a, status: newStatus, checkInTime: newStatus !== 'Absent' ? new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : '-' }
                  : a
              ));
            } else {
              setAttendance([...attendance, {
                id: attendance.length + 1,
                sessionId,
                studentId,
                status: newStatus,
                checkInTime: newStatus !== 'Absent' ? new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : '-',
                location: 'In-Person'
              }]);
            }
            
            addLog(`${student?.name || 'Student'} marked as ${newStatus}`, 'status');
          };

          const generateQRCode = (data) => {
            const size = 200;
            const qrData = encodeURIComponent(data);
            return `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${qrData}`;
          };

          const handleQRCheckIn = () => {
            if (!selectedSession) return alert('Please start a session first');
            const qrData = `SESSION:${selectedSession.id}:${Date.now()}`;
            setQrCodeData(qrData);
            setShowQRCode(true);
            addLog('QR Code generated', 'qr');
          };

          const simulateQRScan = () => {
            if (!selectedSession) return;
            const classStudents = students.filter(s => s.classId === selectedClass.id);
            const randomStudent = classStudents[Math.floor(Math.random() * classStudents.length)];
            handleStatusChange(randomStudent.id, 'Present', selectedSession.id);
            addLog(`${randomStudent.name} checked in via QR`, 'checkin');
          };

          const classStudents = selectedClass ? students.filter(s => s.classId === selectedClass.id) : [];
          const classSessions = selectedClass ? sessions.filter(s => s.classId === selectedClass.id) : [];

          return (
            <div className="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-6">
              <div className="max-w-7xl mx-auto">
                <div className="mb-8">
                  <div className="flex items-center justify-between mb-4 flex-wrap gap-4">
                    <div>
                      <h1 className="text-4xl font-bold text-white mb-2 flex items-center gap-3">
                        <CheckCircle size={40} className="text-cyan-400" />
                        Attendance System
                      </h1>
                      <p className="text-gray-400">Multi-class attendance tracking</p>
                    </div>
                    <div className="bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-3 rounded-xl">
                      <p className="text-white font-bold">{classes.length} Classes</p>
                      <p className="text-cyan-100 text-sm">{students.length} Students</p>
                    </div>
                  </div>

                  <div className="flex gap-3 flex-wrap">
                    {[
                      { id: 'dashboard', icon: BarChart3, label: 'Dashboard' },
                      { id: 'classes', icon: Users, label: 'Classes' },
                      { id: 'sessions', icon: Calendar, label: 'Sessions' },
                      { id: 'checkin', icon: UserCheck, label: 'Check-In' }
                    ].map(tab => (
                      <button key={tab.id} onClick={() => setActiveTab(tab.id)}
                        className={`flex items-center gap-2 px-4 py-3 rounded-lg transition-all ${activeTab === tab.id ? 'bg-cyan-500 text-white shadow-lg' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}>
                        <tab.icon size={20} />
                        <span className="font-medium">{tab.label}</span>
                      </button>
                    ))}
                  </div>
                </div>

                <div className="bg-gray-900 rounded-2xl p-8 shadow-2xl">
                  {activeTab === 'dashboard' && (
                    <div className="space-y-6">
                      <div className="flex justify-between items-center">
                        <h2 className="text-3xl font-bold text-white">Dashboard</h2>
                        <div className="flex items-center gap-2 bg-gray-700 px-4 py-2 rounded-lg">
                          <Clock size={20} className="text-cyan-400" />
                          <span className="text-white font-mono">{currentTime.toLocaleTimeString()}</span>
                        </div>
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div className="bg-gradient-to-br from-cyan-500 to-blue-600 p-6 rounded-xl">
                          <Users size={32} className="text-white mb-2" />
                          <h3 className="text-white text-4xl font-bold">{classes.length}</h3>
                          <p className="text-cyan-100">Total Classes</p>
                        </div>
                        <div className="bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-xl">
                          <CheckCircle size={32} className="text-white mb-2" />
                          <h3 className="text-white text-4xl font-bold">{students.length}</h3>
                          <p className="text-green-100">Total Students</p>
                        </div>
                        <div className="bg-gradient-to-br from-purple-500 to-pink-600 p-6 rounded-xl">
                          <Calendar size={32} className="text-white mb-2" />
                          <h3 className="text-white text-4xl font-bold">{sessions.length}</h3>
                          <p className="text-purple-100">Total Sessions</p>
                        </div>
                        <div className="bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-xl">
                          <AlertCircle size={32} className="text-white mb-2" />
                          <h3 className="text-white text-4xl font-bold">{sessions.filter(s => s.status === 'active').length}</h3>
                          <p className="text-orange-100">Active Now</p>
                        </div>
                      </div>

                      <div className="bg-gray-800 p-6 rounded-xl">
                        <h3 className="text-xl font-bold text-white mb-4">Recent Activity</h3>
                        <div className="space-y-2 max-h-64 overflow-y-auto">
                          {checkInLog.slice(-8).reverse().map((log, idx) => (
                            <div key={idx} className="text-sm bg-gray-700 p-2 rounded">
                              <span className="text-gray-400 text-xs">{log.timestamp}</span>
                              <p className="text-white">{log.event}</p>
                            </div>
                          ))}
                          {checkInLog.length === 0 && <p className="text-gray-400 text-center py-4">No activity yet</p>}
                        </div>
                      </div>
                    </div>
                  )}

                  {activeTab === 'classes' && (
                    <div className="space-y-6">
                      <div className="flex justify-between items-center">
                        <h2 className="text-3xl font-bold text-white">Classes</h2>
                        <button onClick={() => setShowAddClass(true)} className="flex items-center gap-2 bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-lg">
                          <Plus size={18} />
                          Add Class
                        </button>
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {classes.map(cls => (
                          <div key={cls.id} className="bg-gray-800 p-6 rounded-xl border-2 border-gray-700 hover:border-cyan-500 transition-all">
                            <div>
                              <h3 className="text-xl font-bold text-white">{cls.name}</h3>
                              <p className="text-gray-400">{cls.code}</p>
                            </div>
                            <div className="space-y-2 mt-4">
                              <p className="text-gray-300"><span className="text-gray-500">Instructor:</span> {cls.instructor}</p>
                              <p className="text-gray-300"><span className="text-gray-500">Students:</span> {students.filter(s => s.classId === cls.id).length}</p>
                            </div>
                            <button onClick={() => { setSelectedClass(cls); setActiveTab('sessions'); }}
                              className="w-full mt-4 bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded-lg">
                              View Details
                            </button>
                          </div>
                        ))}
                      </div>

                      {showAddClass && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                          <div className="bg-gray-800 p-6 rounded-xl w-96">
                            <div className="flex justify-between items-center mb-4">
                              <h3 className="text-xl font-bold text-white">Add New Class</h3>
                              <button onClick={() => setShowAddClass(false)} className="text-gray-400 hover:text-white">
                                <X size={24} />
                              </button>
                            </div>
                            <div className="space-y-3">
                              <input type="text" placeholder="Class Name" value={newClass.name}
                                onChange={(e) => setNewClass({...newClass, name: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600" />
                              <input type="text" placeholder="Class Code" value={newClass.code}
                                onChange={(e) => setNewClass({...newClass, code: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600" />
                              <input type="text" placeholder="Instructor Name" value={newClass.instructor}
                                onChange={(e) => setNewClass({...newClass, instructor: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600" />
                              <input type="text" placeholder="Schedule" value={newClass.schedule}
                                onChange={(e) => setNewClass({...newClass, schedule: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600" />
                              <button onClick={handleAddClass} className="w-full bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded-lg">Add Class</button>
                            </div>
                          </div>
                        </div>
                      )}
                    </div>
                  )}

                  {activeTab === 'sessions' && selectedClass && (
                    <div className="space-y-6">
                      <div className="flex justify-between items-center">
                        <div>
                          <h2 className="text-3xl font-bold text-white">Sessions</h2>
                          <p className="text-gray-400">{selectedClass.name}</p>
                        </div>
                        <button onClick={() => setShowAddSession(true)} className="flex items-center gap-2 bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-lg">
                          <Plus size={18} />
                          Add Session
                        </button>
                      </div>

                      <div className="bg-gray-800 p-6 rounded-xl">
                        <h3 className="text-xl font-bold text-white mb-4">Manage Students</h3>
                        <div className="flex gap-2 mb-4">
                          <button onClick={() => setShowAddStudent(true)} className="flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">
                            <Plus size={18} />
                            Add Student
                          </button>
                          <label className="flex items-center gap-2 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg cursor-pointer">
                            <Upload size={18} />
                            Upload CSV
                            <input type="file" accept=".csv" onChange={handleUploadClassList} className="hidden" />
                          </label>
                        </div>
                        <div className="space-y-2">
                          {classStudents.map(student => (
                            <div key={student.id} className="flex items-center justify-between bg-gray-700 p-3 rounded-lg">
                              <div className="flex items-center gap-3">
                                <span className="text-2xl">{student.photo}</span>
                                <div>
                                  <p className="text-white font-medium">{student.name}</p>
                                  <p className="text-gray-400 text-sm">{student.studentId}</p>
                                </div>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>

                      <div className="space-y-3">
                        {classSessions.map(session => (
                          <div key={session.id} className="bg-gray-800 p-4 rounded-xl flex items-center justify-between">
                            <div>
                              <p className="text-white font-bold">{session.date}</p>
                              <p className="text-gray-400">{session.startTime} - {session.endTime}</p>
                              <span className={`inline-block mt-2 px-3 py-1 rounded-full text-sm ${
                                session.status === 'active' ? 'bg-green-500/20 text-green-400' :
                                session.status === 'completed' ? 'bg-blue-500/20 text-blue-400' :
                                'bg-gray-500/20 text-gray-400'
                              }`}>{session.status}</span>
                            </div>
                            <div>
                              {session.status === 'scheduled' && (
                                <button onClick={() => handleStartSession(session)} className="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">
                                  Start Session
                                </button>
                              )}
                              {session.status === 'active' && (
                                <button onClick={() => { setSelectedSession(session); setActiveTab('checkin'); }} className="bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-lg">
                                  Take Attendance
                                </button>
                              )}
                            </div>
                          </div>
                        ))}
                      </div>

                      {showAddSession && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                          <div className="bg-gray-800 p-6 rounded-xl w-96">
                            <div className="flex justify-between items-center mb-4">
                              <h3 className="text-xl font-bold text-white">Add Session</h3>
                              <button onClick={() => setShowAddSession(false)} className="text-gray-400 hover:text-white">
                                <X size={24} />
                              </button>
                            </div>
                            <div className="space-y-3">
                              <input type="date" value={newSession.date}
                                onChange={(e) => setNewSession({...newSession, date: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg" />
                              <input type="time" value={newSession.startTime}
                                onChange={(e) => setNewSession({...newSession, startTime: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg" />
                              <input type="time" value={newSession.endTime}
                                onChange={(e) => setNewSession({...newSession, endTime: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg" />
                              <input type="text" placeholder="Location" value={newSession.location}
                                onChange={(e) => setNewSession({...newSession, location: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg" />
                              <button onClick={handleAddSession} className="w-full bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded-lg">Add Session</button>
                            </div>
                          </div>
                        </div>
                      )}

                      {showAddStudent && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                          <div className="bg-gray-800 p-6 rounded-xl w-96">
                            <div className="flex justify-between items-center mb-4">
                              <h3 className="text-xl font-bold text-white">Add Student</h3>
                              <button onClick={() => setShowAddStudent(false)} className="text-gray-400 hover:text-white">
                                <X size={24} />
                              </button>
                            </div>
                            <div className="space-y-3">
                              <input type="text" placeholder="Student Name" value={newStudent.name}
                                onChange={(e) => setNewStudent({...newStudent, name: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg" />
                              <input type="text" placeholder="Student ID" value={newStudent.studentId}
                                onChange={(e) => setNewStudent({...newStudent, studentId: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg" />
                              <input type="email" placeholder="Email" value={newStudent.email}
                                onChange={(e) => setNewStudent({...newStudent, email: e.target.value})}
                                className="w-full bg-gray-700 text-white px-4 py-2 rounded-lg" />
                              <button onClick={handleAddStudent} className="w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg">Add Student</button>
                            </div>
                          </div>
                        </div>
                      )}
                    </div>
                  )}

                  {activeTab === 'checkin' && (
                    <div className="space-y-6">
                      <h2 className="text-3xl font-bold text-white">Check-In</h2>
                      
                      {!selectedSession ? (
                        <div className="text-center py-12">
                          <AlertCircle size={64} className="text-gray-600 mx-auto mb-4" />
                          <p className="text-gray-400">No active session. Start a session from the Sessions tab.</p>
                        </div>
                      ) : (
                        <div className="space-y-6">
                          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            {[
                              { mode: 'qr', icon: QrCode, label: 'QR Code', color: 'cyan' },
                              { mode: 'nfc', icon: Smartphone, label: 'NFC', color: 'purple' },
                              { mode: 'manual', icon: UserCheck, label: 'Manual', color: 'green' }
                            ].map(({ mode, icon: Icon, label }) => (
                              <button key={mode} onClick={() => setAttendanceMode(mode)}
                                className={`p-6 rounded-xl border-2 transition-all ${attendanceMode === mode ? 'border-cyan-500 bg-cyan-500/10' : 'border-gray-700 bg-gray-800'}`}>
                                <Icon size={48} className="text-cyan-400 mb-3 mx-auto" />
                                <h3 className="text-white font-bold">{label}</h3>
                              </button>
                            ))}
                          </div>

                          <div className="bg-gray-800 p-6 rounded-xl">
                            {attendanceMode === 'qr' && (
                              <div className="text-center py-8">
                                {!showQRCode ? (
                                  <button onClick={handleQRCheckIn} className="px-8 py-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg font-bold">
                                    Generate QR Code
                                  </button>
                                ) : (
                                  <div>
                                    <img src={generateQRCode(qrCodeData)} alt="QR Code" className="w-64 h-64 mx-auto mb-4" />
                                    <p className="text-gray-400 mb-4">Scan to check in</p>
                                    <div className="flex gap-3 justify-center">
                                      <button onClick={simulateQRScan} className="px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg">
                                        Simulate Scan
                                      </button>
                                      <button onClick={() => setShowQRCode(false)} className="px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg">
                                        Close
                                      </button>
                                    </div>
                                  </div>
                                )}
                              </div>
                            )}

                            {attendanceMode === 'nfc' && (
                              <div className="text-center py-8">
                                <Smartphone size={120} className={`mx-auto mb-4 ${nfcListening ? 'text-purple-400 animate-pulse' : 'text-gray-600'}`} />
                                <h4 className="text-white text-xl font-bold mb-4">{nfcListening ? 'Listening...' : 'NFC Standby'}</h4>
                                <button onClick={() => setNfcListening(true)} disabled={nfcListening}
                                  className="px-8 py-4 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white rounded-lg font-bold">
                                  Activate NFC
                                </button>
                              </div>
                            )}

                            {attendanceMode === 'manual' && (
                              <div className="space-y-3">
                                {classStudents.map((student) => {
                                  const studentAttendance = attendance.find(a => a.sessionId === selectedSession.id && a.studentId === student.id);
                                  return (
                                    <div key={student.id} className="flex items-center justify-between bg-gray-700 p-4 rounded-lg">
                                      <div className="flex items-center gap-3">
                                        <span className="text-3xl">{student.photo}</span>
                                        <div>
                                          <p className="text-white font-medium">{student.name}</p>
                                          <p className="text-gray-400 text-sm">{student.studentId}</p>
                                        </div>
                                        {studentAttendance && (
                                          <span className={`ml-4 px-3 py-1 rounded-full text-sm ${
                                            studentAttendance.status === 'Present' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'
                                          }`}>{studentAttendance.status}</span>
                                        )}
                                      </div>
                                      <div className="flex gap-2">
                                        <button onClick={() => handleStatusChange(student.id, 'Present', selectedSession.id)} 
                                          className="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg">Present</button>
                                        <button onClick={() => handleStatusChange(student.id, 'Absent', selectedSession.id)}
                                          className="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg">Absent</button>
                                      </div>
                                    </div>
                                  );
                                })}
                              </div>
                            )}
                          </div>
                        </div>
                      )}
                    </div>
                  )}
                </div>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ProAttendanceSystem />);
    </script>
</body>
</html>
